<% @page_title = "新規作成 | 最終確認" %>

<div class="container">
  <h4>Step3: 最終確認</h4>
  <p>以下の条件で作成します</p>
  <%= form_with(model: @create, url: create_done_path, local: true) do |f| %>
    <% for num in 0..(session[:count].to_i - 1) do %>
    <h5 class="col-12">Deploymet<%= num %></h5>
    <!-- イメージ選択 -->
    <div class="form-group offset-md-1">
      <div class="form-inline">
        <div class="col-md-2">
          <%= f.label :image, 'Image:', :class => 'control-label' %>
        </div>
        <div class="col-md-10">
          <%= f.label :image_name, session["image-#{num}".to_sym] %>
        </div>
      </div>
      <input value="<%= session["image-#{num}".to_sym] %>" type="hidden" name="create[<%= num %>][image]">
    </div>
    <!-- イメージ選択 ここまで -->

    <!-- Podの名前 -->
    <div class="form-group offset-md-1">
      <div class="form-inline">
        <div class="col-md-2">
          <%= f.label :name, 'Name:', class: 'control-label' %>
        </div>
        <div class="col-md-10">
          <%= f.label :name, session["name-#{num}".to_sym] %>
        </div>
      </div>
      <input value="<%= session["name-#{num}".to_sym] %>" type="hidden" name="create[<%= num %>][name]">
    </div>
    <!-- Podの名前 ここまで -->

    <!-- Port -->
    <div class="form-group offset-md-1">
      <div class="form-inline">
        <div class="col-md-2">
          <%= f.label :port, 'Port:', class: 'control-label' %>
        </div>
        <div class="col-md-10">
          <%= f.label :port, session["port-#{num}".to_sym] %>
        </div>
      </div>
      <input value="<%= session["port-#{num}".to_sym] %>" type="hidden" name="create[<%= num %>][port]">
    </div>
    <!-- Port ここまで -->

    <!-- Requests memory -->
    <div class="form-group offset-md-1">
      <div class="form-inline">
        <div class="col-md-2">
          <%= f.label :request_memory, 'Requests memory: ', class: 'control-label' %>
        </div>
        <div class="col-md-10">
          <%= f.label :request_memory, "#{session["request_memory-#{num}".to_sym]} MiB" %>
        </div>
      </div>
      <input value="<%= session["request_memory-#{num}".to_sym] %>" type="hidden" name="create[<%= num %>][request_memory]">
    </div>
    <!-- Requests memory ここまで -->

    <!-- Limits memory -->
    <div class="form-group offset-md-1">
      <div class="form-inline">
        <div class="col-md-2">
          <%= f.label :limit_memory, 'Limits memory: ', class: 'control-label' %>
        </div>
        <div class="col-md-10">
          <%= f.label :limit_memory, "#{session["limit_memory-#{num}".to_sym]} MiB" %>
        </div>
      </div>
      <input value="<%= session["limit_memory-#{num}".to_sym] %>" type="hidden" name="create[<%= num %>][limit_memory]">
    </div>
    <!-- Limits memory ここまで -->

    <!-- Requests cpu-->
    <div class="form-group offset-md-1">
      <div class="form-inline">
        <div class="col-md-2">
          <%= f.label :request_cpu, 'Requests CPU: ', class: 'control-label' %>
        </div>
        <div class="col-md-10">
          <%= f.label :request_cpu, "#{session["request_cpu-#{num}".to_sym]}" %>
        </div>
      </div>
      <input value="<%= session["request_cpu-#{num}".to_sym] %>" type="hidden" name="create[<%= num %>][request_cpu]">
    </div>
    <!-- Requests cpu ここまで -->

    <!-- Limits cpu -->
    <div class="form-group offset-md-1">
      <div class="form-inline">
        <div class="col-md-2">
          <%= f.label :limit_cpu, 'Limits CPU: ', class: 'control-label' %>
        </div>
        <div class="col-md-10">
          <%= f.label :limit_cpu ,"#{session["limit_cpu-#{num}".to_sym]}" %>
        </div>
      </div>
      <input value="<%= session["limit_cpu-#{num}".to_sym] %>" type="hidden" name="create[<%= num %>][limit_cpu]">
    </div>
    <!-- Limits cpu ここまで -->

    <hr>
    <% end %>
    <div class="form-inline">
      <a href="<%= create_path %>" class="btn btn-primary" role="button">戻る</a>
      <%= f.submit "次へ", class: "btn btn-primary ml-auto" %>
    </div>
  <% end %>
</div>
